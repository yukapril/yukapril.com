---
title: 入手 小键一号 小键盘
date: 2023-01-30 20:45:00 GMT+0800
tags: [ QMK, VIA, 客制化, 机械键盘 ]
---

接上一篇，提到了这个小键一号键盘。买它主要是看中了有旋钮、有屏幕、同时给源代码。想看看别人网上分享的代码是什么样子的。顺便自己改改键位，可以当作 Marco （宏）键盘来用。

<!-- truncate -->

## 小键一号开箱及组装

买来的时候，只有外壳、电路板、以及旋钮。旋钮默认安装一个，还附送备用一个。没有送数据线。接口是 Mini USB 的，相当于 Micro USB 的上一代。还好我还有这种线。

<img src="https://cdn.nlark.com/yuque/0/2023/jpeg/86612/1675056950133-fd9c21eb-0d52-4d1f-9c8c-937110c4faee.jpeg" referrerpolicy="no-referrer" alt="（图源百度百科）mini USB 与 Micro USB" />

由于是小作坊 3D 打印，所以做工就非常一般吧。拆开后盖，可以看到用的是 Teensy 2.0 的板子。

<img src="https://cdn.nlark.com/yuque/0/2023/jpeg/86612/1675056960597-243372ad-39f1-49b9-9f12-e63efad979f3.jpeg" referrerpolicy="no-referrer" alt="小键一号正面" />

<img src="https://cdn.nlark.com/yuque/0/2023/jpeg/86612/1675056969102-fc08f0a3-decd-4d15-adbc-7d0cc91f319c.jpeg" referrerpolicy="no-referrer" alt="小键一号背面" />

买的时候看过作者的文章，那飞线一个惨，所以期待不高。结果打开后，还是挺整齐的。

<img src="https://cdn.nlark.com/yuque/0/2023/jpeg/86612/1675056974197-5e5fc2ab-e2b0-4244-8798-2accbebd319a.jpeg" referrerpolicy="no-referrer" alt="小键一号安装轴体" />

由于作者跟我说兼容三脚五脚轴，我当时买了一盒 45 颗 Akko 雪蓝灰轴。结果发现它只能上三脚轴。正赶上过年期间，再买也很难短时间收到，最终春节末尾，干脆把五脚轴剪了，安装上了。

<img src="https://cdn.nlark.com/yuque/0/2023/jpeg/86612/1675056978302-6a7729e2-e0b5-4005-84f9-6fbb66fed3e6.jpeg" referrerpolicy="no-referrer" alt="小键一号安装键帽" />

键帽是复古红白机马里奥。

## 小键一号改固件

这个比较麻烦。

作者给的源代码，说是 QMK 0.13 左右的，我尝试用 0.13 不能编译成功。最终只得在最新 QMK 0.19 上进行改进移植。

大概花了两个半天时间，到除夕晚上九点左右，固件终于可以正常编译跑通了。但真的就是仅仅跑通而已。

后来又陆陆续续稍微修改了一点点。

我修改后的源代码[见此](https://github.com/yukapril/qmk_firmware)，`yukapril-mak01` 分支，`keyboards/mak01` 下。

目前已知的问题：

* 不知道啥原因，有时候刷新固件，结果还是老的，可能和 teensy 有关。主要有时候刷新后 Marcos 等功能在 VIA 中丢失。
* VIA 中不能编辑灯光。还好我基本上都是关闭状态，也用不到灯光。
* 原本的灯光带，右侧四颗可以用作状态展示，我给移除了。

屏幕的话，每行 20 个字符，可以显示 8 行。

我的思路是：

第一行显示层状态和键盘灯状态，即 `LAYER: BASE STAT: NCS`。

`LAYER` 是当前层名，后接 4 个字符。

`STAT` 是键盘三个灯状态，`N` 为 `Num`，`C` 为 `Caps`，`S` 为 `Scroll`。

第二行显示一行分隔符，即 `====================`。

第三四五六行，为当前层每个按钮的提示。

最后两行，没用到。

弄到现在，我都不想改了...

最后，晒下每层定义吧。

每层，左上角三个键，是固定的，切换三个层。

**0 层**

<img src="https://cdn.nlark.com/yuque/0/2023/png/86612/1675056983798-5c6720b1-334a-4d03-8cba-9ab4f9137e15.png" referrerpolicy="no-referrer" alt="小键一号 layer 0" />

小键盘数字，故意用了标准键盘的键位，否则没开 `Num`，是输入不了数字的。

右侧三个，外加一些常用的按键。下部四个，就是复制、粘贴、剪切、全选。

**1 层**

<img src="https://cdn.nlark.com/yuque/0/2023/png/86612/1675056987760-4963d221-9a63-454a-af57-2e3929088209.png" referrerpolicy="no-referrer" alt="小键一号 layer 1" />

这一层，都是控制灯光的。

**2 层**

<img src="https://cdn.nlark.com/yuque/0/2023/png/86612/1675056991974-3b9831aa-2d31-47ae-a899-17c8bded0143.png" referrerpolicy="no-referrer" alt="小键一号 layer 2" />

这一层，是宏层，正好对应 16 个宏。

宏主要有：

* git 个别命令文本，太长，直接放到宏里了
* 代码编辑器中，重构时候用到的快捷键，这样不用在标准键盘上两只手按了
* 锁屏，以及解锁密码等，锁屏解锁一键操作

## 整体感受

做工算是勉强过得去吧。自己配置的键轴键帽体验还行。不过由于 3D 打印模具问题，最下面一排按钮，都稍微有点磨下沿。

还有就是，没安装键轴之前，通过背面走飞线调试代码和按钮，经常出现最右侧一列被激活情况，感觉像是 R4 线接 GND 了。好在安装上就好了，就没太在意这个。

自己改了固件，算是能正常使用了，但是感觉目前的配置方案还有进一步优化的空间，待后续多用用再改。一开始特别期待屏幕，目前来看，屏幕也就那么回事，显示下当前的层级而已，其他显示内容基本上都不用看。
